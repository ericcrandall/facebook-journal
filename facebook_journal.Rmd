---
title: "R Notebook"
output: html_notebook
---

My goal here is to write code to convert my Facebook post history into Day One Journal format. I may try to turn this into a Shiny app as well, as a learning experience.

```{r}
library(jsonlite)
library(lubridate)
library(anytime)


```

So each your_posts.json has 5 components:

* timestamp - timestamp
* attachments - associated links or photos
* data - the post itself
* title - "Eric Posted in Washington Place" or "Eric updated his status"
* tags - People that you tagged


Facebook outputs text incorrectly coded as UTF-8 as described [here](https://stackoverflow.com/questions/50008296/facebook-json-badly-encoded) (it's a mojibake). For example apostrophes coded as "Eric√¢\u0080\u0099s" I used iconv below to fix it. I used cat to remove line numbers and print with markdown formatting.

```{r}

FBposts <- fromJSON("/Users/eric/Documents/Eric_Personal_Projects/facebook-ericcrandall0_json/posts/your_posts_1.json")


FBconvert <- function(FBposts){
  


  for(p in length(data)){
    
    FBposts$timestamp <- anytime(FBposts$timestamp)
    
  
  
    text<- print(paste(FBposts$title[p],iconv(FBposts$data[[p]]$post[1], "UTF-8", to = "latin2"), sep = "\n"))
    date <- as.character(FBposts$timestamp[p])
    url <- unlist(FBposts$attachments[[p]]$data[[1]])
    photo <- FBposts$attachments[[p]]$data[[1]]$media$uri
    
    post <- c(date=date,text=text,url,photo=photo)
  }
  
}



```


Going to prepare a list for use with this: https://help.dayoneapp.com/en/articles/435871-command-line-interface-cli